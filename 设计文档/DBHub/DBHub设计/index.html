<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="记录工作和学习文档">
    
    
    <link rel="shortcut icon" href="../../../img/favicon.ico">

    
    <title>DBHub设计 - 我的笔记</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../../css/base.min.css" rel="stylesheet">
    <link href="../../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="../../..">我的笔记</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../../keymap/">快捷方式</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">文章 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">大数据</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../%E6%96%87%E7%AB%A0/%E5%A4%A7%E6%95%B0%E6%8D%AE/alluxio/">Alluxio</a>
</li>

        
            
<li >
    <a href="../../../%E6%96%87%E7%AB%A0/%E5%A4%A7%E6%95%B0%E6%8D%AE/hudi/">Hudi</a>
</li>

        
            
<li >
    <a href="../../../%E6%96%87%E7%AB%A0/%E5%A4%A7%E6%95%B0%E6%8D%AE/spark-streaming/">Spark</a>
</li>

        
            
<li >
    <a href="../../../%E6%96%87%E7%AB%A0/%E5%A4%A7%E6%95%B0%E6%8D%AE/yarn/">Yarn</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">数据库</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../%E6%96%87%E7%AB%A0/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8A%80%E6%9C%AF/Canal%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">Canal</a>
</li>

        
            
<li >
    <a href="../../../%E6%96%87%E7%AB%A0/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8A%80%E6%9C%AF/LogMiner/">LogMinor</a>
</li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">MySQL</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../%E6%96%87%E7%AB%A0/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8A%80%E6%9C%AF/MySQL%20GTID%20set%E5%A4%84%E7%90%86%E6%8A%80%E6%9C%AF/">GTID</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">日记</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../%E6%96%87%E7%AB%A0/%E6%97%A5%E8%AE%B0/A-Voyager_%E8%B5%B7%E8%88%AA/">起航</a>
</li>

        
            
<li >
    <a href="../../../%E6%96%87%E7%AB%A0/%E6%97%A5%E8%AE%B0/Diary-%E8%88%AA%E8%A1%8C%E6%97%A5%E5%BF%97/">航行日志</a>
</li>

        
            
<li >
    <a href="../../../%E6%96%87%E7%AB%A0/%E6%97%A5%E8%AE%B0/Engine-1_%E5%86%A5%E6%83%B3%E4%BD%93%E6%82%9F/">Engine1-冥想</a>
</li>

        
            
<li >
    <a href="../../../%E6%96%87%E7%AB%A0/%E6%97%A5%E8%AE%B0/Engine-3_%E5%B1%80%E5%A4%96%E4%BA%BA/">Engine3-局外人</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">java <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../%E6%96%87%E7%AB%A0/java%E6%8A%80%E6%9C%AF/idea/">IDEA</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../../ToDo/">ToDo</a>
                    </li>
                
                
                
                    <li >
                        <a href="https://github.com/arcticXXX">GitHub</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#_1">一、需求</a></li>
            <li class="second-level"><a href="#_2">背景</a></li>
                
            <li class="second-level"><a href="#_3">需求分析</a></li>
                
                <li class="third-level"><a href="#1">1.用户关注什么？</a></li>
                <li class="third-level"><a href="#2dba">2.DBA关注什么？</a></li>
                <li class="third-level"><a href="#3ndc">3.NDC运维人员关注什么？</a></li>
            <li class="second-level"><a href="#_4">需求归纳</a></li>
                
        <li class="first-level "><a href="#_5">二、设计</a></li>
            <li class="second-level"><a href="#1v31">1.数据库概览页面（V3.1）</a></li>
                
            <li class="second-level"><a href="#2v31">2.数据库配置修改页面（V3.1）</a></li>
                
            <li class="second-level"><a href="#3v31">3.数据库基本配置页面（V3.1）</a></li>
                
        <li class="first-level "><a href="#-dbhubtab">- 点击基本信息、探针表信息、DBHub信息右侧的编辑图标，可以弹出上述配置修改也对应的Tab</a></li>
            <li class="second-level"><a href="#4dbhubv31">4.DBHub实例页面（V3.1）</a></li>
                
            <li class="second-level"><a href="#5dbhubv31">5.DBHub实例详情页面（V3.1）</a></li>
                
            <li class="second-level"><a href="#6dbhubv31">6.DBHub表视图页面（V3.1）</a></li>
                
            <li class="second-level"><a href="#7v31">7.源表运行信息页面（V3.1）</a></li>
                
            <li class="second-level"><a href="#9v31">9.子表的列表页面（待确认是否需要实现子表V3.1）</a></li>
                
            <li class="second-level"><a href="#9v31_1">9.子表的运行信息页面（待确认是否需要实现子表V3.1）</a></li>
                
            <li class="second-level"><a href="#10v31">10.子表的创建配置页面（待确认是否需要实现子表V3.1）</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<p>[toc]</p>
<h2 id="_1">一、需求<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>为NDC3.0新的产品形态（DBHub）设计运维方便、对用户友好的展示方式。</p>
<h3 id="_2">背景<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>DBHub是NDC3.0新引入的产品形态，目的是为关系型数据库（DDB MySQL Oracle DB2等）提供流批一体的访问方式。DBHub的功能依赖了许多外部系统，如Kafka、Iceberg、HDFS等，大部分场景下DBHub不是将数据直接发送给用户，而是将数据导入这些外部系统，间接提供给用户；除了完成数据导入，DBHub还会为用户提供统一的服务入口，以子表的形式，将用户引导到其他的系统获取需要的数据，比如一个子表可以对应到kafka的一个topic。总的来说，对内，DBHub是一个关联了多个系统的数据集散中心，对外，DBHub是一个以源端数据库表为维度的数据访问入口。</p>
<p><em>注：子表-从属于数据库源表的表，一个源表可以有多张子表，一张子表只能属于一张源表，每一张子表描述了NDC将数据库一张源表的数据同步到一个特定的目标端（比如kafka的一个topic），子表用“子表名”（SubTableName）做唯一性标识，从属于不同源表的子表可以重名。</em></p>
<h3 id="_3">需求分析<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<h4 id="1">1.用户关注什么？<a class="headerlink" href="#1" title="Permanent link">&para;</a></h4>
<ul>
<li>从哪里获取增量数据？（和DBHub相关）</li>
<li>怎样获取增量数据？（相关）</li>
<li>增量数据现在是否在正常发送？（相关）</li>
<li>怎样释放不使用的增量数据？（相关）</li>
</ul>
<h4 id="2dba">2.DBA关注什么？<a class="headerlink" href="#2dba" title="Permanent link">&para;</a></h4>
<ul>
<li>NDC使用的数据库的基本配置（相关）</li>
<li>数据库的数据被同步到哪些系统？状态如何？（相关）</li>
<li>NDC对数据库造成的压力（相关）</li>
<li>数据库进行变更后，NDC如何适配？如果可以自动适配，如何识别NDC已经适配成功（相关）</li>
</ul>
<h4 id="3ndc">3.NDC运维人员关注什么？<a class="headerlink" href="#3ndc" title="Permanent link">&para;</a></h4>
<ul>
<li>NDC机器的负载（和DBHub无关）</li>
<li>所有任务的运行情况（无关）</li>
<li>所有数据库的情况，是否存在风险（相关）</li>
<li>NDC任务与什么业务相关？负责人是谁？可用性和一致性要求多高？（相关）</li>
<li>源端或目标端的负责人是谁？（相关）</li>
</ul>
<h3 id="_4">需求归纳<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<ul>
<li>1.</li>
<li>2.</li>
</ul>
<h2 id="_5">二、设计<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<h3 id="1v31">1.数据库概览页面（V3.1）<a class="headerlink" href="#1v31" title="Permanent link">&para;</a></h3>
<p>作用：</p>
<ul>
<li>查找和定位数据库</li>
<li>展示所有数据库的运行状态（DBHub状态）</li>
<li>提供查看数据库配置信息的入口</li>
<li>提供查看数据库运行信息的入口</li>
<li>提供添加数据库的入口</li>
</ul>
<p>交互需求：</p>
<ul>
<li>展示一些数据库的基本信息，比如名称、类型、地址等，可以标识一个数据库</li>
<li>展示数据库的运行信息，可以展示数据库上运行的任务是否存在异常、以及数据库本身是否存在异常和风险等；<u><em>NDC目前比较欠缺风险事件在页面上的展示，只能通过报警来通知，从NDC界面上无法查看最近发生了哪些风险或问题，只能看到当前的状态</em></u></li>
<li>提供搜索功能，通过数据库地址、名称等定位到相关的数据库；比较特别的是，希望通过dbn地址搜索定位到DDB</li>
<li>支持通过数据库的状态参数进行过滤，快速发现有问题的数据库实例或任务</li>
</ul>
<p>页面信息：</p>
<table>
<thead>
<tr>
<th>项目分类</th>
<th>项目名称</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>数据库列表信息</strong></td>
<td>实例名称</td>
<td>数据库实例名称</td>
<td>music_basicplate_rodg</td>
</tr>
<tr>
<td>（列表）</td>
<td>项目</td>
<td>数据库所属项目</td>
<td>music_mig</td>
</tr>
<tr>
<td>和DBHub无关</td>
<td>类型</td>
<td>数据库类型</td>
<td>DDB</td>
</tr>
<tr>
<td></td>
<td>主地址</td>
<td>数据库IP:PORT，或HOST:PORT</td>
<td>10.130.44.25:18028</td>
</tr>
<tr>
<td></td>
<td>备选IP</td>
<td>备选IP或域名</td>
<td>10.10.49.17,db-music1.hz.163.org</td>
</tr>
<tr>
<td></td>
<td>状态</td>
<td>数据库上puller或任务的状态</td>
<td>运行中</td>
</tr>
</tbody>
</table>
<p>特别说明：</p>
<p>新增了”备选IP“，大部分实例是不需要被选IP的，但是又希望能在列表页面上通过搜索备选IP找到数据库，可以考虑将”主地址“和”备选IP“合并到一起显示</p>
<p>待确认问题：</p>
<p>puller和DBHub的关系（DBHub代替puller？），新版是否要考虑兼容展示puller的状态</p>
<p>相关接口：</p>
<p>页面示例：</p>
<h3 id="2v31">2.数据库配置修改页面（V3.1）<a class="headerlink" href="#2v31" title="Permanent link">&para;</a></h3>
<p>作用：</p>
<ul>
<li>提供修改数据库基本信息的页面</li>
</ul>
<p>交互需求：</p>
<ul>
<li>采用右侧弹出模态框的形式</li>
<li>分别展示数据库的基本配置、探针表配置、DBHub配置信息</li>
<li>提供配置和保存的功能</li>
<li>提供“测试”检查连通性和权限</li>
</ul>
<p>页面信息：</p>
<table>
<thead>
<tr>
<th>项目分类</th>
<th>项目名称</th>
<th>说明</th>
<th>示例</th>
<th>是否可编辑</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>数据库基本配置</strong></td>
<td>实例名称</td>
<td>数据库实例名称</td>
<td>music_basicplate_rodg</td>
<td>是</td>
</tr>
<tr>
<td>（模态框Tab）</td>
<td>项目</td>
<td>数据库所属项目</td>
<td>music_mig</td>
<td>否</td>
</tr>
<tr>
<td>和DBHub无关</td>
<td>类型</td>
<td>数据库类型</td>
<td>DDB</td>
<td>否</td>
</tr>
<tr>
<td></td>
<td>版本</td>
<td>DDB专有</td>
<td>4.6+</td>
<td>是</td>
</tr>
<tr>
<td></td>
<td>主地址</td>
<td>数据库IP:PORT</td>
<td>10.130.44.25:18028</td>
<td>是</td>
</tr>
<tr>
<td></td>
<td>备选IP</td>
<td>备选IP或域名</td>
<td>10.10.49.17</td>
<td>是</td>
</tr>
<tr>
<td></td>
<td>最大增量连接</td>
<td></td>
<td>5</td>
<td>是</td>
</tr>
<tr>
<td></td>
<td>最大全量拉取并发</td>
<td></td>
<td>5</td>
<td>是</td>
</tr>
<tr>
<td></td>
<td>用户名</td>
<td></td>
<td>sys</td>
<td>是</td>
</tr>
<tr>
<td></td>
<td>密码</td>
<td>后端不返回</td>
<td>*******</td>
<td>是</td>
</tr>
<tr>
<td></td>
<td>数据库管理员</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>探针表配置</strong></td>
<td>是否开启探针表</td>
<td></td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>（模态框Tab）</td>
<td>探针表</td>
<td>库.表</td>
<td>sys.probe</td>
<td>是</td>
</tr>
<tr>
<td>和DBHub无关</td>
<td>探针时间列</td>
<td>探针表时间列名</td>
<td>updateTime</td>
<td>是</td>
</tr>
<tr>
<td></td>
<td>更新间隔(s)</td>
<td>探针表更新间隔</td>
<td>2</td>
<td>是</td>
</tr>
<tr>
<td><strong>DBHub配置</strong></td>
<td>HDFS配置-集群</td>
<td></td>
<td>建德传媒</td>
<td>是</td>
</tr>
<tr>
<td>（模态框Tab）</td>
<td>HDFS配置-队列</td>
<td></td>
<td>portal</td>
<td>是</td>
</tr>
<tr>
<td>和DBHub相关</td>
<td>HDFS配置-访问地址</td>
<td></td>
<td>jdbc:hive2://hive1.jd.163&hellip;</td>
<td>否</td>
</tr>
<tr>
<td></td>
<td>Iceberg相关配置</td>
<td>待确认</td>
<td></td>
<td>是</td>
</tr>
<tr>
<td></td>
<td>其他store配置</td>
<td>待确认</td>
<td></td>
<td>是</td>
</tr>
<tr>
<td></td>
<td>消息队列-类型</td>
<td></td>
<td></td>
<td>是</td>
</tr>
<tr>
<td></td>
<td>消息队列-实例名</td>
<td></td>
<td></td>
<td>是</td>
</tr>
<tr>
<td></td>
<td>消息队列-其他参数</td>
<td></td>
<td></td>
<td>否</td>
</tr>
<tr>
<td></td>
<td>执行域</td>
<td>公共/私有</td>
<td></td>
<td>是</td>
</tr>
</tbody>
</table>
<p>相关接口：</p>
<p>页面示例：</p>
<p><img src="/Users/wangtao/notes/设计文档/image-20201022153517583.png" alt="image-20201022153517583" style="zoom:50%;" /></p>
<h3 id="3v31">3.数据库基本配置页面（V3.1）<a class="headerlink" href="#3v31" title="Permanent link">&para;</a></h3>
<p>作用：</p>
<ul>
<li>用于展示数据库基本配置信息</li>
<li>展示数据库同步到其他实例的数据流</li>
</ul>
<p>交互需求：</p>
<h2 id="-dbhubtab">- 点击基本信息、探针表信息、DBHub信息右侧的编辑图标，可以弹出上述配置修改也对应的Tab<a class="headerlink" href="#-dbhubtab" title="Permanent link">&para;</a></h2>
<p>页面信息：</p>
<table>
<thead>
<tr>
<th>项目分类</th>
<th>项目名称</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>基本信息</strong></td>
<td>数据库ID</td>
<td>ID</td>
<td>6529</td>
</tr>
<tr>
<td>（信息栏）</td>
<td>实例名称</td>
<td>数据库实例名称</td>
<td>music_basicplate_rodg</td>
</tr>
<tr>
<td>和DBHub无关</td>
<td>项目</td>
<td>数据库所属项目</td>
<td>music_mig</td>
</tr>
<tr>
<td></td>
<td>类型</td>
<td>数据库类型</td>
<td>DDB</td>
</tr>
<tr>
<td></td>
<td>主地址</td>
<td>数据库IP:PORT</td>
<td>10.130.44.25:18028</td>
</tr>
<tr>
<td></td>
<td>版本</td>
<td>DDB专有</td>
<td>4.6+</td>
</tr>
<tr>
<td></td>
<td>增量连接数</td>
<td></td>
<td>3/5</td>
</tr>
<tr>
<td></td>
<td>全量拉取并发</td>
<td></td>
<td>5/5</td>
</tr>
<tr>
<td></td>
<td>数据库管理员</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>探针表信息</strong></td>
<td>探针库</td>
<td></td>
<td>test</td>
</tr>
<tr>
<td>（信息栏）</td>
<td>探针表</td>
<td></td>
<td>probe</td>
</tr>
<tr>
<td>和DBHub无关</td>
<td>探针时间列</td>
<td></td>
<td>timeColumn</td>
</tr>
<tr>
<td></td>
<td>更新间隔</td>
<td></td>
<td>3s</td>
</tr>
<tr>
<td><strong>DBHub信息</strong></td>
<td>DBHubID</td>
<td></td>
<td>345</td>
</tr>
<tr>
<td></td>
<td>同上配置信息页</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>同步任务</strong></td>
<td>和之前相同</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>订阅任务</strong></td>
<td>和之前相同</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>双向同步</strong></td>
<td>和之前相同</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>校验任务</strong></td>
<td>和之前相同</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>相关接口：</p>
<p>页面示例：</p>
<p><img alt="image-20201022153649205" src="/Users/wangtao/notes/设计文档/image-20201022153649205.png" /></p>
<h3 id="4dbhubv31">4.DBHub实例页面（V3.1）<a class="headerlink" href="#4dbhubv31" title="Permanent link">&para;</a></h3>
<p>作用：</p>
<ul>
<li>
<p>主要是面向运维人员</p>
</li>
<li>
<p>展示DBHub实例的基本运行概况（DBHub下可能有多个DBHub实例，每个DBHub实例对应一个MySQL）</p>
</li>
<li>提供DBHub实例的操作入口</li>
</ul>
<p>交互需求：</p>
<ul>
<li>提供按照“数据库地址”搜索的功能</li>
<li>提供按照“版本”过滤的功能</li>
<li>提供按照“状态”过滤的功能</li>
<li>提供按照“实例ID”搜索的功能（和任务列表按照ID搜索的逻辑一致）</li>
<li>重启 切换 下线功能只提供给项目管理员</li>
<li>点击实例ID可以跳转到该实例的详情页面（类似于拉取信息页面）</li>
</ul>
<p>页面信息：</p>
<table>
<thead>
<tr>
<th>项目分类</th>
<th>项目名称</th>
<th>说明</th>
<th>示例</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>DBHub实例列表信息</strong></td>
<td>实例ID</td>
<td>DBHub实例ID</td>
<td>556</td>
<td>V3.1</td>
</tr>
<tr>
<td>（列表）</td>
<td>数据库地址</td>
<td></td>
<td>10.122.173.167:3306</td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>执行节点</td>
<td></td>
<td>10.196.84.84:7102</td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>状态</td>
<td>运行中/失败</td>
<td>失败</td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>延迟时间</td>
<td></td>
<td>0ms</td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>版本</td>
<td></td>
<td>3.1.0-SNAPSHOT</td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>操作</td>
<td></td>
<td>重启 切换 下线</td>
<td>V3.1</td>
</tr>
</tbody>
</table>
<p>相关接口：</p>
<p>页面示例：</p>
<p><img alt="image-20201022154941788" src="/Users/wangtao/notes/设计文档/image-20201022154941788.png" /></p>
<h3 id="5dbhubv31">5.DBHub实例详情页面（V3.1）<a class="headerlink" href="#5dbhubv31" title="Permanent link">&para;</a></h3>
<p>作用：</p>
<ul>
<li>展示DBHub实例的运行信息</li>
<li>展示DBHub下游消费者（pusher，3.1不做）</li>
</ul>
<p>交互需求：</p>
<p>运行信息页面信息：和任务运行信息页面类似</p>
<table>
<thead>
<tr>
<th>项目分类</th>
<th>项目名称</th>
<th>说明</th>
<th>示例</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>概览</strong></td>
<td>实例ID</td>
<td>DBHub实例ID</td>
<td>556</td>
<td>V3.1</td>
</tr>
<tr>
<td>（信息栏）</td>
<td>运行状态</td>
<td>DBHub实例运行状态</td>
<td>停止</td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>进程版本</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>开始时间</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>错误码</td>
<td></td>
<td>连接错误</td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>失败原因</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>执行节点</td>
<td></td>
<td>10.196.84.84:7102</td>
<td>V3.1</td>
</tr>
<tr>
<td><strong>源库信息</strong></td>
<td>实例名称</td>
<td></td>
<td>music_basicplate_rodg.1</td>
<td>V3.1</td>
</tr>
<tr>
<td>（信息栏）</td>
<td>类型</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>访问地址</td>
<td></td>
<td>10.122.173.167:3306</td>
<td>V3.1</td>
</tr>
<tr>
<td><strong>增量数据</strong></td>
<td>源端最新位置点</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td>（信息栏）</td>
<td>最新推进位置点</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>HDFS路径</td>
<td>（路径组织方式？）</td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>Iceberg路径</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>最早历史数据时间</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>历史数据总量</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td><strong>消费者信息</strong></td>
<td>考虑单独TAB展示</td>
<td>pusher信息（待确认）</td>
<td></td>
<td>V3.1</td>
</tr>
</tbody>
</table>
<p>相关接口：</p>
<p>页面示例：</p>
<p><img alt="image-20201022162842861" src="/Users/wangtao/notes/设计文档/image-20201022162842861.png" /></p>
<p>同步对象页面信息：</p>
<table>
<thead>
<tr>
<th>项目分类</th>
<th>项目名称</th>
<th>说明</th>
<th>示例</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>dbn表</strong></td>
<td>表名</td>
<td>库名.表名</td>
<td></td>
<td></td>
</tr>
<tr>
<td>（列表信息）</td>
<td>最早历史数据</td>
<td></td>
<td>2020-08-25 14:30:33</td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>增量历史数据量</td>
<td></td>
<td>45 MB</td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>目标表</td>
<td>待确认：是否有目标表概念</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>dbn表详细信息</strong></td>
<td>表名</td>
<td>展示在表头</td>
<td></td>
<td></td>
</tr>
<tr>
<td>增量数据-Tab</td>
<td>数据地址</td>
<td>提供清理数据功能</td>
<td></td>
<td></td>
</tr>
<tr>
<td>（模态框-Tab）</td>
<td>数据量</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>最早历史数据</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>过期时间</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>其他信息</td>
<td>待补充</td>
<td></td>
<td></td>
</tr>
<tr>
<td>表结构-Tab</td>
<td>schemaId</td>
<td>列表信息</td>
<td></td>
<td></td>
</tr>
<tr>
<td>（膜态框-Tab）</td>
<td>更新时间</td>
<td>列表信息</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>DDL</td>
<td>列表信息</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>表结构</td>
<td>提供编辑表结构的功能</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>相关接口：</p>
<p>页面示例：</p>
<p><img alt="image-20201022164414721" src="/Users/wangtao/notes/设计文档/image-20201022164414721.png" /></p>
<p><img src="/Users/wangtao/notes/设计文档/image-20201021155219359.png" alt="image-20201021155219359" style="zoom:50%;" /></p>
<h3 id="6dbhubv31">6.DBHub表视图页面（V3.1）<a class="headerlink" href="#6dbhubv31" title="Permanent link">&para;</a></h3>
<p>作用：</p>
<ul>
<li>
<p>展示</p>
</li>
<li>
<p>展示DBHub表级的视图（包括源表）</p>
</li>
<li>提供源表操作入口（启动、停止、删除、配置）</li>
</ul>
<p>交互需求：</p>
<ul>
<li>点击配置会将当前页面切换为可编辑状态，可以添加、删除、编辑表，非停止状态的表不可以编辑和删除</li>
</ul>
<p>页面信息：</p>
<table>
<thead>
<tr>
<th>项目分类</th>
<th>项目名称</th>
<th>说明</th>
<th>示例</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>源表的运行信息列表</td>
<td>表名</td>
<td>源表库.表</td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td>（列表）</td>
<td>目标表</td>
<td>目标库.表</td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>状态</td>
<td></td>
<td>运行中</td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>速度</td>
<td></td>
<td>10 行/s</td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>流量</td>
<td></td>
<td>3 KB/s</td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>延迟</td>
<td></td>
<td>95 ms</td>
<td>V3.1</td>
</tr>
</tbody>
</table>
<p>相关接口：</p>
<p>页面示例：</p>
<p><img alt="image-20201023164329605" src="/Users/wangtao/notes/设计文档/image-20201023164329605.png" /></p>
<h3 id="7v31">7.源表运行信息页面（V3.1）<a class="headerlink" href="#7v31" title="Permanent link">&para;</a></h3>
<p>作用：</p>
<ul>
<li>展示源表的运行信息</li>
<li>dbn表的运行状态，提供操作入口</li>
</ul>
<p>交互需求：</p>
<p>页面信息：</p>
<table>
<thead>
<tr>
<th>项目分类</th>
<th>项目名称</th>
<th>说明</th>
<th>示例</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>源表的基本信息</td>
<td>表名</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>源表状态</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>启动时间</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>增量数据总量</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>目标表名</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>待补充。。。</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>dbn表</td>
<td>表名</td>
<td>库名.表名</td>
<td></td>
<td></td>
</tr>
<tr>
<td>（列表信息）</td>
<td>实例地址</td>
<td>MySQL实例地址</td>
<td>10.10.10.10:3306</td>
<td></td>
</tr>
<tr>
<td></td>
<td>DBHub实例ID</td>
<td></td>
<td>345</td>
<td></td>
</tr>
<tr>
<td></td>
<td>状态</td>
<td>DBHub实例状态</td>
<td>运行中</td>
<td></td>
</tr>
<tr>
<td></td>
<td>最早历史数据</td>
<td></td>
<td>2020-08-25 14:30:33</td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>增量历史数据量</td>
<td></td>
<td>45 MB</td>
<td>V3.1</td>
</tr>
<tr>
<td>dbn表详细信息</td>
<td>表名</td>
<td>展示在表头</td>
<td></td>
<td></td>
</tr>
<tr>
<td>增量数据</td>
<td>数据地址</td>
<td>提供清理数据功能（存疑）</td>
<td></td>
<td></td>
</tr>
<tr>
<td>（模态框-Tab）</td>
<td>数据量</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>最早历史数据</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>过期时间</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>表结构</td>
<td>schemaId</td>
<td>列表信息</td>
<td></td>
<td></td>
</tr>
<tr>
<td>（膜态框-Tab）</td>
<td>更新时间</td>
<td>列表信息</td>
<td></td>
<td></td>
</tr>
<tr>
<td>列表</td>
<td>DDL</td>
<td>列表信息</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>表结构</td>
<td>提供编辑表结构的功能</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>相关接口：</p>
<p>页面示例：</p>
<p><img src="https://tinkerer-pic.oss-cn-hangzhou.aliyuncs.com/picgo/image-20201021155219359.png" alt="image-20201021155219359" style="zoom:50%;" /></p>
<h3 id="9v31">9.子表的列表页面（待确认是否需要实现子表V3.1）<a class="headerlink" href="#9v31" title="Permanent link">&para;</a></h3>
<p>作用：</p>
<ul>
<li>子表的运行信息</li>
</ul>
<p>交互需求：</p>
<p>页面信息：</p>
<table>
<thead>
<tr>
<th>项目分类</th>
<th>项目名称</th>
<th>说明</th>
<th>示例</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>子表的运行信息</td>
<td>子表名</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>（子列表）</td>
<td>状态</td>
<td></td>
<td>运行中/未下发</td>
<td>V3.0</td>
</tr>
<tr>
<td></td>
<td>速度</td>
<td></td>
<td>10 行/s</td>
<td>V3.0</td>
</tr>
<tr>
<td></td>
<td>流量</td>
<td></td>
<td>3 KB/s</td>
<td>V3.0</td>
</tr>
<tr>
<td></td>
<td>延迟</td>
<td></td>
<td>95 ms</td>
<td>V3.0</td>
</tr>
<tr>
<td></td>
<td>目标实例</td>
<td></td>
<td></td>
<td>V3.0</td>
</tr>
<tr>
<td></td>
<td>目标表</td>
<td>topic或表</td>
<td></td>
<td>V3.0</td>
</tr>
<tr>
<td></td>
<td>创建时间</td>
<td></td>
<td></td>
<td>V3.0</td>
</tr>
<tr>
<td></td>
<td>创建人</td>
<td></td>
<td></td>
<td>V3.0</td>
</tr>
<tr>
<td></td>
<td>当前执行任务</td>
<td></td>
<td></td>
<td>V3.0</td>
</tr>
<tr>
<td></td>
<td>上次执行任务</td>
<td></td>
<td></td>
<td>V3.0</td>
</tr>
<tr>
<td></td>
<td>操作</td>
<td>修改、启动、停止、详情</td>
<td></td>
<td></td>
</tr>
<tr>
<td>订阅子表的配置</td>
<td>源表</td>
<td></td>
<td></td>
<td>V3.0</td>
</tr>
<tr>
<td>（模态框）</td>
<td>topic</td>
<td></td>
<td></td>
<td>V3.0</td>
</tr>
<tr>
<td></td>
<td>目标实例信息</td>
<td></td>
<td></td>
<td>V3.0</td>
</tr>
<tr>
<td></td>
<td>订阅字段</td>
<td></td>
<td></td>
<td>V3.0</td>
</tr>
<tr>
<td></td>
<td>其他订阅相关的配置</td>
<td></td>
<td></td>
<td>V3.0</td>
</tr>
<tr>
<td>同步子表的配置</td>
<td>源表</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td>（模态框）</td>
<td>目标表</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>目标实例信息</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>同步字段</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
<tr>
<td></td>
<td>其他同步相关的配置</td>
<td></td>
<td></td>
<td>V3.1</td>
</tr>
</tbody>
</table>
<p>相关接口：</p>
<p>页面示例：</p>
<h3 id="9v31_1">9.子表的运行信息页面（待确认是否需要实现子表V3.1）<a class="headerlink" href="#9v31_1" title="Permanent link">&para;</a></h3>
<p>作用：</p>
<ul>
<li>子表的运行信息</li>
</ul>
<p>交互需求：</p>
<p>页面信息：</p>
<table>
<thead>
<tr>
<th>项目分类</th>
<th>项目名称</th>
<th>说明</th>
<th>示例</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>相关接口：</p>
<p>页面示例：</p>
<h3 id="10v31">10.子表的创建配置页面（待确认是否需要实现子表V3.1）<a class="headerlink" href="#10v31" title="Permanent link">&para;</a></h3>
<p>作用：</p>
<ul>
<li>子表的创建配置</li>
</ul>
<p>交互需求：</p>
<p>页面信息：</p>
<table>
<thead>
<tr>
<th>项目分类</th>
<th>项目名称</th>
<th>说明</th>
<th>示例</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>相关接口：</p>
<p>页面示例：</p>
<p>主要Dashboar-center开发工作量估计：</p>
<p>DBHub实例的维护：创建、删除、修改、高可用、源端检查（5d+前端页面3个）</p>
<p>源表-dbn表的状态展示（不需要持久化）：根据DBHub生成（2d+前端3个页面）</p>
<p>源表的操作和状态维护：（2d）</p>
<p>数据流：2d（前端1个页面）</p>
<p>子表相关：展示、状态维护、操作、调度（和pusher的关联）：（5d+前端&gt;3个页面）</p>
<p>pusher相关：功能设计、界面展示、center调度（5d+前端&gt;3个页面）</p>
<p>表结构相关：1d（前端1个页面）</p>
<p>待确认的问题：</p>
<p>子表pusher要不要在本期做</p>
<p>和DBHub无关的一些前端改进要不要做</p></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../../.."</script>
    
    <script src="../../../js/base.js"></script>

    <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
